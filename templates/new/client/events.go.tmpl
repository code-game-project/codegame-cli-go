package {{.PackageName}}

/*
This code was generated by codegame-cli-go.

CHANGES TO THIS FILE MAY CAUSE INCORRECT BEHAVIOR AND WILL BE LOST IF
THE CODE IS REGENERATED.
*/

import "{{.LibraryURL}}"

{{range .Commands}}
// Send{{.PascalName}} sends a `{{.Name}}` command.
func (g *Game) Send{{.PascalName}}(data {{.PascalName}}CmdData) error {
	return g.socket.Send({{.PascalName}}Cmd, data)
}
{{end}}

{{range .Events}}
// On{{.PascalName}} triggers the callback every time the `{{.Name}}` event is received.
func (g *Game) On{{.PascalName}}(callback func(data {{.PascalName}}EventData)) cg.CallbackId {
	return g.socket.On({{.PascalName}}Event, func(event cg.Event) {
		var data {{.PascalName}}EventData
		err := event.UnmarshalData(&data)
		if err == nil {
			callback(data)
		}
	})
}

// On{{.PascalName}}Once triggers the callback the next time the `{{.Name}}` event is received.
func (g *Game) On{{.PascalName}}Once(callback func(data {{.PascalName}}EventData)) cg.CallbackId {
	return g.socket.Once({{.PascalName}}Event, func(event cg.Event) {
		var data {{.PascalName}}EventData
		err := event.UnmarshalData(&data)
		if err == nil {
			callback(data)
		}
	})
}
{{end}}

// RemoveCallback removes the event callback with the specified id.
func (g *Game) RemoveCallback(id cg.CallbackId) {
	g.socket.RemoveCallback(id)
}
